var Weiboyi,W;Weiboyi=W=function(t,e,i,s){function n(e){if("string"==typeof e.xtype){var i=this;i[e.xtype]=function(s){return this.superClass=e.extend,s=s||{},t.extend(!0,this,e.opts),this.id=this.id||o.getAutoID(this.autoIdPrefix),"string"==typeof s||"number"==typeof s?(this.config={},t.extend(this.config,e.opts),this.initialize(s)):(t.extend(this,s),this.config={},t.extend(this.config,i[e.xtype].opts,s),this.initialize()),o.addCmp(this.id,this),this.proxy||this},e.extend&&(o.extend(i[e.xtype],e.extend),e.api=e.api?t.unique(e.api.concat(e.extend.api)):e.extend.api);var s=e.xtype.toLowerCase();i.register[s]=i[e.xtype],t.extend(i.register[s].prototype,e.methods),i[e.xtype].prototype.xtype=s,i[e.xtype].api=e.api,i[e.xtype].opts=e.opts}}"undefined"==typeof console&&(e.console={log:function(){}});var o={version:"1.1",components:{},register:{},layouts:{register:{}},zIndex:{no:s,low:0,middle:1e3,high:1e4,getMax:function(t,e){return t=t||"low",this.hasOwnProperty(t)?this[t||"low"]+=e||1:s}},isCmp:function(t){return t&&t.status},_isDeferred:function(t){return t&&"function"==typeof t.done&&"function"==typeof t.fail},getCmp:function(t){var e=this.components[t];return e&&e.proxy||e},getCmps:function(e){e=e||{};var i=[];return t.each(this.components,function(n,o){var a=!0;t.each(e,function(t,e){return o[t]!==e?a=!1:s}),a&&i.push(o.proxy||o)}),i},addCmp:function(t,e){("string"==typeof t||"number"==typeof t)&&(this.components[t]=e)},removeCmp:function(t){delete this.components[t]},getAutoID:function(t){return this.autoID=this.autoID||0,this.autoID++,(t||"weiboyiCmp")+this.autoID},extend:function(e,i){t.each(i.prototype,function(t,i){e.prototype[t]=e.prototype[t]||i})},setDefaultOpts:function(e,i){t.extend(o.register[e].opts,i)},createComponent:n,test:{effCompare:function(){var e,i=o.util.asArray(arguments),s=i.length,n=100;s>=2&&("number"==typeof i[s-1]&&(n=i[s-1]),t.each(i,function(t,i){if("function"==typeof i){var s=(new Date).getTime();for(e=0;n>e;e++)i();console.log(t+"--"+((new Date).getTime()-s))}}))}},module:function(t,i){t&&"string"==typeof t||console.log("error namespace : "+t),e[t]===s?e[t]="function"==typeof i?i()||{}:{}:console.log("namespace "+t+" already exists")}};o.Tools={types:{close:{title:"关闭",cls:"weiboyiTool weiboyiTool_close",defaultHandler:function(t,e,i){i.close?i.close():i.hide()}},gear:{title:"设置",cls:"weiboyiTool weiboyiTool_gear",defaultHandler:function(){}},help:{title:"帮助",cls:"weiboyiTool weiboyiTool_help",defaultHandler:function(){}},more:{title:"更多",cls:"weiboyiTool weiboyiTool_more",defaultHandler:function(){}}},renderTools:function(e,i){var s=this;e instanceof Array&&e.length&&t.each(e,function(e,n){var a,r,h;if("string"==typeof n){if(!o.Tools.types.hasOwnProperty(n))return;h=n,a=o.Tools.types[n],r=a.defaultHandler}else{if(!o.util.isObject(n))return;h=n.id,a=o.Tools.types[n.id]||n,r=n.handler||a.defaultHandler||t.noop}var l=t('<a href="javascript:void(0)" class="'+a.cls+'"></a>').text(a.text||"");l.click(function(t){r.call(s,t,l,s),t.stopPropagation()}),l.appendTo(i)})}},o.EventManager={events:{},addListener:function(t,e,i,s){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push({handler:e,scope:i,params:s})},removeListener:function(e,i,s){this.events&&(this.events[e]=t.grep(this.events[e],function(t){var e=s||t.scope,n=i||t.handler;return t.scope!==e||t.handler!==n}))},trigger:function(t,e){if(this.events){var i,s,n=this.events[t];if(!n)return;for(i=0;s=n[i];i++)if(s.handler.apply(s.scope||this,e||s.params||[])===!1)return!1}}};var a={userData:null,name:location.hostname,expiresDays:360,init:function(){if(!a.userData)try{a.userData=i.createElement("INPUT"),a.userData.type="hidden",a.userData.style.display="none",a.userData.style.behavior="url('#default#userData')",a.userData.addBehavior("#default#userData"),i.body.appendChild(a.userData);var t=new Date;t.setDate(t.getDate()+a.expiresDays),a.userData.expires=t.toUTCString()}catch(e){return!1}return!0},clear:function(){},setItem:function(t,e){a.init()&&(a.userData.load(a.name),a.userData.setAttribute(t,e),a.userData.save(a.name))},getItem:function(t){return a.init()?(a.userData.load(a.name),a.userData.getAttribute(t)):s},removeItem:function(t){a.init()&&(a.userData.load(a.name),a.userData.removeAttribute(t),a.userData.save(a.name))}};o.UserData=a,o.localStorage=e.localStorage||o.UserData,o.restGet=function(e,i,s,n,o){var a=t.Deferred();return t.ajax({url:e,type:o||"get",data:i,dataType:"json"}).done(function(t){t&&1e3===t.code?("function"==typeof s&&s.call(this,t),a.resolve()):a.reject(t)}).fail(function(){a.reject()}),a.promise()},o.restPost=function(t,e,i,s){return o.restGet(t,e,i,s,"post")};var r=i.createElement("INPUT");return o.support={placeholder:"placeholder"in r,css3Animation:"webkitAnimation"in r.style||"oAnimation"in r.style||"mozAnimation"in r.style||"animation"in r.style},o}(jQuery,window,document),function(t,e,i,s){function n(e){var i,s,n,a=[];if(t.isPlainObject(e)){for(i in e)if(e.hasOwnProperty(i)){var r=e[i];n=o(r),n!==!1&&a.push('"'+i+'":'+n)}return"{"+a.join(",")+"}"}if(e instanceof Array){for(s=0;e.length>s;s++)n=o(e[s]),n!==!1&&a.push(n);return"["+a.join(",")+"]"}return"null"}function o(t){var e;return e="string"==typeof t?'"'+t+'"':t instanceof Array?n(t):t===s?!1:null===t?"null":"number"==typeof t?t:n(t)}e.util={isTouchDevice:"ontouchstart"in i,ie6:t.browser.msie&&/^6/.test(t.browser.version),ie7:t.browser.msie&&/^7/.test(t.browser.version),encodeHtmlChar:function(t){return(t+"").replace(/["<>& ]/g,function(t){return"&"+{'"':"quot","<":"lt",">":"gt","&":"amp"," ":"nbsp"}[t]+";"})},asArray:function(t,e,i){return Array.prototype.slice.call(t,e||0,i||t.length)},isObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},isEmail:function(t){return/^[a-zA-Z_0-9\-\.]{1,100}@[a-zA-Z_0-9\-]{1,50}(\.[a-zA-Z_0-9\-]{1,50}){0,2}\.[a-zA-Z]{2,4}$/.test(t)},isDateStr:function(t){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},isUrl:function(t){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},isPhoneNo:function(t){return/^(\+86)?1[3458]\d{9}$/.test(t)},setCookie:function(e,i,s,n){t.cookie(e,i,{expires:s,path:n})},getCookie:function(e){return t.cookie(e)},deleteCookie:function(e,i){t.cookie(e,null,{expires:-1,path:i})},getCharCount:function(t){return t?t.replace(/[\u4E00-\u9FA5]|[^\x00-\xff]/gi,"cc").length:0},deserializeQueryString:function(t){if(t){var e={};"?"===t.charAt(0)&&(t=t.substring(1));for(var i=t.split("&"),s=0;i.length>s;s++){var n=i[s].indexOf("=");if(-1!==n){var o=i[s].substring(0,n),a=i[s].substring(n+1);e[o]=a}}return e}},formatDate:function(){function t(t){return 10>t?"0"+t:t}var i,s,n,o=e.util.asArray(arguments);for(n=0;2>n&&o.length>n;n++)if("string"==typeof o[n])i=o[n];else if(o[n]instanceof Date){if(/Invalid|NaN/.test(o[n]))return;s=o[n]}i=i||"Y-m-d H:i:s",s=s||new Date;var a={Y:s.getFullYear(),m:t(s.getMonth()+1),d:t(s.getDate()),H:t(s.getHours()),i:t(s.getMinutes()),s:t(s.getSeconds())};return i.replace(/[YmdHis]/g,function(t){return a[t]||""})},parseDate:function(t){function e(t){return 1*t}if("string"==typeof t){var i=t.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) *$/);if(i&&i.length>3)return new Date(e(i[1]),e(i[2])-1,e(i[3]));if(i=t.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}) *$/),i&&i.length>5)return new Date(e(i[1]),e(i[2])-1,e(i[3]),e(i[4]),e(i[5]));if(i=t.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2}) *$/),i&&i.length>6)return new Date(e(i[1]),e(i[2])-1,e(i[3]),e(i[4]),e(i[5]),e(i[6]));if(i=t.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2})\.(\d{1,9}) *$/),i&&i.length>7)return new Date(e(i[1]),e(i[2])-1,e(i[3]),e(i[4]),e(i[5]),e(i[6]),e(i[7]))}return null},formatStr:function(t){var i=e.util.asArray(arguments,1);return t.replace(/\{(\d+)\}/g,function(t,e){return i[e]})},formatNumber:function(e,i){var s=/(\d)(?=(\d{3})+(\.|$))/g;return t.isNumeric(e)?(i=t.isNumeric(i)?parseInt(i,10)||0:2,e=Math.round(e*Math.pow(10,i))/Math.pow(10,i),e=(e+"").replace(s,function(t){return t+","})):e}},e.util.jsonStringify="JSON"in i&&JSON.stringify?JSON.stringify:n}(jQuery,Weiboyi,window),function(t,e,i){e.createComponent({xtype:"Component",opts:{},extend:i,api:["status","el","show","hide","destroy","getWidth","setWidth","getHeight","setHeight","addListener","removeListener","trigger","render"],methods:{initialize:function(){var e=this.constructor.api,s=this;return s.status={initialized:!1},s.events=s.events||{},s.el=t(s.el||"<div></div>"),s.id&&s.el.attr("id",s.id),e instanceof Array&&(s.proxy=s.proxy||{constructor:s.constructor},t.each(e,function(t,e){e in s.proxy||(s.proxy[e]="function"==typeof s[e]?function(){return s[e]&&s[e].apply(s,arguments)}:s[e])})),s.initComponent()===!1?(s.destroy(),i):(s.doListeners(),s.style&&s.el.css(s.style),s.renderTo&&s.render(s.renderTo),s.cmpCls&&s.el.addClass(s.cmpCls),s.cls&&s.el.addClass(s.cls),s.parentCmp&&s.parentCmp.addItems(s),s.animateTarget&&(s.animateTarget=t(s.animateTarget),s.effect=s.effect||"animateTarget"),s.doInitStatus(),s.status.initialized=!0,i)},initComponent:function(){},doListeners:function(){var t;for(t in(this.config||this).listeners)this.config.listeners.hasOwnProperty(t)&&this.addListener(t,this.listeners[t])},setHeight:function(t){this.el.height(t),this.height=t},getHeight:function(){return this.el.height()||this.height},getWidth:function(){return this.el.width()||this.width},setWidth:function(t){this.width=t,this.el.width(t)},resize:function(t){this.el.css(t)},addListener:function(t,i,s,n){var o=this,a=o.proxy||o;if(e.EventManager.addListener.apply(a,[t,i,s,n]),/^(before|after)\w+/.test(t)){var r=t.replace(/^(before|after)/,"");if("function"==typeof o[r]&&!o[r].original){var h=o[r];o[r]=function(){if(o.trigger("before"+r,arguments)===!1)return!1;var t=o[r].original.apply(o,arguments),i=e.util.asArray(arguments);return e._isDeferred(t)?t.done(function(){i.unshift("resolved"),o.trigger("after"+r,i)}).fail(function(){i.unshift("rejected"),o.trigger("after"+r,i)}):(i.unshift(t),o.trigger("after"+r,i)),t},o[r].original=h}}},removeListener:function(){e.EventManager.removeListener.apply(this.proxy||this,arguments)},trigger:function(){return e.EventManager.trigger.apply(this.proxy||this,arguments)},render:function(t){e.isCmp(t)&&t.getOutWard?(this.outward=t.getOutWard(),this.el.appendTo(t.el)):this.el.appendTo(t),this.status.rendered=!0},doInitStatus:function(){},effects:{der:i,normal:{show:function(){this.el.show(),this.effects.der.resolveWith(this)},hide:function(){this.el.hide(),this.effects.der.resolveWith(this)}},fade:{show:function(){var t=this;this.el.fadeIn(function(){t.effects.der.resolveWith(t)})},hide:function(){var t=this;this.el.fadeOut(function(){t.effects.der.resolveWith(t)})}},animateTarget:{show:function(){if(this.animateTarget.length){var e=this;this.animateHelper=this.animateHelper||t('<div class="'+this.cmpCls+'_animateHelper"></div>').appendTo("body"),this.el.css({display:"block",visibility:"hidden"});var i=this.animateTarget.offset(),s=this.el.offset();this.animateHelper.css({display:"block",width:this.animateTarget.width(),height:this.animateTarget.height(),left:i.left,top:i.top,opacity:"0.5"}).animate({height:""+this.getHeight(),width:""+this.getWidth(),left:""+s.left,top:""+s.top,opacity:"0.1"},"normal",function(){e.animateHelper.hide(),e.el.css({visibility:"visible"}),e.effects.der.resolveWith(e)})}},hide:function(){if(this.animateTarget.length){var e=this;this.animateHelper=this.animateHelper||t('<div class="'+this.cmpCls+'_animateHelper"></div>').appendTo("body");var i=this.animateTarget.offset(),s=this.el.offset();this.el.hide(),this.animateHelper.css({display:"block",height:this.getHeight(),width:this.getWidth(),left:s.left,top:s.top}).animate({width:""+this.animateTarget.width(),height:""+this.animateTarget.height(),left:""+i.left,top:""+i.top},"normal",function(){e.animateHelper.hide(),e.effects.der.resolveWith(e)})}}}},show:function(){var e=this;return this.status.hidden?(this.effects.der&&"pending"===this.effects.der.state()||(this.effects.der=t.Deferred(),(this.effects[this.effect||"normal"]||this.effects.normal).show.apply(this,arguments),this.effects.der.done(function(){e.status.hidden=!1})),this.effects.der.promise()):!1},hide:function(){var e=this;return this.status.hidden?!1:(this.effects.der&&"pending"===this.effects.der.state()||(this.effects.der=t.Deferred(),(this.effects[this.effect||"normal"]||this.effects.normal).hide.apply(this,arguments),this.effects.der.done(function(){e.status.hidden=!0})),this.effects.der.promise())},destroy:function(){if(this.status){if(this.proxy){var i=this;t.each(this.proxy,function(t){delete i.proxy[t]})}this.container&&this.container.destroy&&this.container.destroy(),this.parentCmp&&this.parentCmp.removeItem(this,!0),this.el.remove(),e.removeCmp(this.id);var s;for(s in this)this.hasOwnProperty(s)&&delete this[s]}}}})}(jQuery,Weiboyi),function(t,e,i){var s={type:"important",size:"small",btnCls:"",handler:t.noop,text:"",el:i,scope:i,renderTo:i,handlerArgs:i,status:{},processingText:i,timing:!1},n={initComponent:function(t){t?this.doExistBtn(t):(this.btnEl?this.doExistBtn(this.btnEl):this.createDom(),this.doHandler(),this.el.appendTo(this.renderTo),this.disabled&&this.disable())},doExistBtn:function(e){if(this.el=t(e),this.text=this.config.text=this.el.text(),this.el.length){var s=this.el.attr("class"),n=this;t.each(s.split(" "),function(t,e){return/^btn_[a-z]*_[a-z]*$/.test(e)?(n.btnCls=e,!1):i}),this.doBtnCls()}},doBtnCls:function(){if(this.btnCls){var t=this.btnCls.split("_");this.size=t[1]||this.size,this.type=t[2]||this.type}else this.btnCls=this.btnCls||"btn_"+this.size+"_"+this.type;this.disabledCls=this.disabledCls||"btn_"+this.size+"_disabled"},createDom:function(){this.doBtnCls(),this.el=e.util.ie6?t('<a href="###"></a>'):t('<a href="javascript:void(0)"></a>'),this.el.attr({"class":this.btnCls}).addClass(this.cls),"number"==typeof this.text&&(this.text+="");var i=t('<span class="btn_wrap"></span>').text(this.text||"");this.el.append(i)},doHandler:function(){var t=this;t.el.click(function(e){t.status.disabled?(e.stopPropagation(),e.preventDefault()):(t.process(),e.stopPropagation())})},process:function(t){var i=this;if(!i.status.disabled){var s;s=i.handlerArgs instanceof Array?i.handler.apply(i.scope||i,i.handlerArgs):i.handler.call(i.scope||i,t,i,i.scope),e._isDeferred(s)?(i.block(),s.always(function(){i.der&&"pending"===i.der.state()||(i.timing?i.block(i.timing,i.blockingText):i.done())})):i.timing&&i.block(i.timing,i.blockingText)}},block:function(e,s){return this.disable(),t.isNumeric(e)?this.time(e,s):(this.processingText&&this.setText(this.processingText),i)},done:function(){this.enable(),this.setText(this.config.text),this.der&&this.der.resolveWith(this)},disable:function(){this.el.removeClass(this.btnCls).addClass(this.disabledCls),this.status.disabled=!0},enable:function(){this.el.addClass(this.btnCls).removeClass(this.disabledCls),this.status.disabled=!1},setHanlder:function(t){this.handler=t,this.doHandler()},setText:function(t){this.text=t,this.el.find(".btn_wrap").text(this.text||"")},time:function(e,i){function s(){var t=[e],s=i.replace(/\{(\w*)\}/,function(e,i){return t[i]||""});n.setText(s)}var n=this;return n.der&&n.der.reject(),n.der=t.Deferred(),i=i||"",n.interval&&clearInterval(n.interval),n.interval=setInterval(function(){e--,0>=e?(clearInterval(n.interval),n.der.resolveWith(n)):n.der.notify(e)},1e3),n.disable(),s(),n.der.progress(s).done(function(){n.done()}),n.der.promise()}};e.createComponent({xtype:"Button",opts:s,methods:n,extend:e.Component,api:["setText","block","setHanlder","enable","disable","done","process"]})}(jQuery,Weiboyi),function(t,e,i){var s={items:[],src:i,content:i,contentHeight:"auto",height:"inherit",layout:{type:i},cmpCls:"weiboyiCtnr",lazyLoad:!1},n={initComponent:function(){var t=this;if("string"==typeof t.layout){var e=t.layout;t.layout={type:e}}t.lazyLoad||t.load(),"number"==typeof t.height&&t.el.height(t.height)},doLoader:function(){var e=this;e.el.addClass(e.cmpCls+"_loading");var i=e.loader.complete;e.loader.complete=function(){e.el.removeClass(e.cmpCls+"_loading"),"function"==typeof i&&i.apply(e,arguments)};var s=e.loader.success;return e.loader.success=function(){"function"==typeof s&&s.apply(e.proxy||e,arguments)},t.ajax(e.loader)},doLayout:function(){},setLoader:function(t){return this.loader=t,this.el.empty(),this.doLoader()},getContent:function(){return this.content},setContent:function(e){e=t(e),e.length&&this.el.children().get(0)!==e.get(0)&&(this.content=e,this.outward&&(this.outward.content=this.content),this.el.empty().append(this.content.show()),this.trigger("contentchanged"))},getHtml:function(){return this.html},setHtml:function(t){var e=this;e.el.html(this.html=t||this.html),e.el.find("img").on("load",function(){e.trigger("contentchanged")}),e.trigger("contentchanged")},getText:function(){return this.text},setText:function(t){this.el.text(this.text=t||this.text).addClass(this.cmpCls+"Text"),this.trigger("contentchanged")},empty:function(e){if(this.items&&this.cfgItems){var i=this.items.slice(0);t.each(i,function(t,e){e&&e.destroy&&e.destroy()})}this.el.empty(),this.status.loaded=!1,e!==!1&&this.trigger("contentchanged")},reload:function(){this.empty(!1),this.load()},load:function(){return this.status.loaded?!1:(this.config.items instanceof Array&&this.config.items.length?this.renderItems():t(this.content).length?this.setContent(this.content):this.config.html?this.setHtml():this.config.text?this.setText():this.config.src&&(this.iframe=t('<iframe class="weiboyiIframeContent" border="0" frameborder="0" src="about:blank" allowTransparency="true"></iframe>').appendTo(this.el),this.iframe.attr("src",this.src)),this.config.loader&&this.doLoader(),this.status.loaded=!0,i)},renderItems:function(){var e=this;this.items=[],this.outward&&(this.outward.items=this.items),t.each(this.config.items,function(t,i){e.addItem(i)}),this.doLayout()},renderItem:function(t,s){"string"==typeof t.layout&&(t.layout={type:t.layout});var n=e.register[t.xtype||(t.layout?t.layout.type?t.layout.type+"ctnr":"container":"container")];return t.renderTo=s||this.el,n?new n(t):i},addItem:function(t){var i=this,s=e.isCmp(t)?t:i.renderItem(t);s&&(s.render(i),i.items.push(s),i.trigger("contentchanged"))},addItems:function(){},removeItem:function(){},getItems:function(){return this.items},getOutWard:function(){return this.outward},destroy:function(){if(this.items&&this.items.length){var i=this.items.slice(0);t.each(i,function(t,e){e&&e.destroy&&e.destroy()})}else this.iframe&&(this.iframe.contentWindow.location="about:blank");e.Component.prototype.destroy.apply(this,arguments)}};e.createComponent({xtype:"Container",opts:s,methods:n,extend:e.Component,api:["getOutWard","hide","show","status","render","doLoader","trigger","removeListener","addListener","load","destroy","addItems","removeItem","renderItem","renderItems","setText","setContent","setHtml","reload","getContent","getHtml","getText","setLoader","addItem","getItems"]})}(jQuery,Weiboyi),function(t,e){var i={activeTab:0,tab:"top",tabCls:"",contentHeight:"auto",height:"inherit",cmpCls:"weiboyiTabCtnr",layout:{},lazyTab:!0},s={renderItems:function(){var e=this;e.tabBodyEl=t('<div class="'+e.cmpCls+'_tabbody"></div>'),"top"===e.tab?(e.tabHeadEl=t('<div class="'+e.cmpCls+'_tabhead"></div>'),e.tabHeadList=t("<ul></ul>"),e.tabCls&&e.tabHeadEl.addClass(e.tabCls),e.el.append(e.tabHeadEl.append(e.tabHeadList)).append(e.tabBodyEl)):"bottom"===e.tab||"left"===e.tab||"right"===e.tab,e.config.items&&(e.items=[],e.config.activeTab>=e.config.items.length&&(e.config.activeTab=0),t.each(e.config.items,function(t,i){var s=e.renderItem(i,e.tabBodyEl);e.items.push(s),e.config.activeTab==t?e.setActiveTab(t):s.hide()}))},renderItem:function(i){var s=this,n=t("<span></span>").text(i.tabTitle||i.title),o=t('<a href="javascript:void(0)"></a>').append(n);if(i.icon){var a=t('<span class="'+this.cmpCls+'_icon"></span>');a.addClass(i.icon),n.prepend(a)}this.tabHeadList.append(t("<li></li>").append(o)),i.lazyLoad=this.lazyTab;var r=e.Container.prototype.renderItem.apply(this,arguments);return r?(o.click(function(t){s.setActiveTab(r),t.preventDefault(),t.stopPropagation()}),r.tabTitleEl=o,r):undefined},setActiveTab:function(i){var s,n;"number"==typeof i?i>=0&&this.items.length>i&&(s=this.items[i]):s="string"==typeof i?e.getCmp(i):i,n=t.inArray(s,this.items),s&&n>-1&&this.activeTabItem!==s&&(this.activeTabItem&&(this.activeTabItem.hide(),this.activeTabItem.tabTitleEl.removeClass("activeTab")),s.tabTitleEl.addClass("activeTab"),this.activeTabItem=s,s.status.loaded||(s.load(),this.trigger("ontabinited",[s,n])),s.show())}};e.createComponent({xtype:"TabCtnr",opts:i,methods:s,extend:e.Container,api:["setActiveTab","hide","show","status","render","doLoader","trigger","removeListener","addListener","load","destroy","addItems","removeItem","renderItem","renderItems","setText","setContent","setHtml","reload"]})}(jQuery,Weiboyi),function(t,e,i){var s={cmpCls:"weiboyiWindow",style:{},lazyLoad:!0,layout:{},frameHeight:50,frameWidth:20,tbar:["close"],width:500,height:300,autoShow:!1,title:i,icon:i,minWidth:150,minHeight:100,modal:!0,floor:"middle",defaultBtnType:"strong"},n={locate:function(){var t={"margin-top":-(this.getHeight()/2)+"px","margin-left":-(this.getWidth()/2)+"px",position:"fixed"};e.util.ie6&&(t.position="absolute"),this.el.addClass("absoluteCenter").css(t)},doContainer:function(){var i=this;if(!i.layout||"string"==typeof i.layout){var s=i.layout;i.layout={type:s}}i.proxy=i.proxy||{};var n={proxy:i.proxy,items:i.items,height:i.contentHeight||"inherit",content:i.content,src:i.src,html:i.html,outward:i,el:i.bodyEl,text:i.text,loader:i.loader,lazyLoad:i.lazyLoad,listeners:i.untreatedListeners},o=i.container=new e.register[i.layout.type?i.layout.type+"ctnr":"container"](t.extend(n,i.layout));i.constructor.api instanceof Array&&t.each(o,function(t,e){t in i.proxy||(i.proxy[t]=e)}),this.addListener("afterresize",function(){this.container.resize({height:this.contentHeight})})},initComponent:function(){var i=this;i.buildDom(),"number"==typeof i.height&&(i.contentHeight=i.height-i.frameHeight,i.bodyEl.height(i.contentHeight)),e.util.ie6&&"auto"===i.width&&(i.width=600),i.el.width(i.width),i.initHead(),i.initButtons(),i.doDraggable(),i.doResizable();var s={"z-index":e.zIndex.getMax(i.floor)};i.modal!==!1&&(i.floor||(i.floor="low",s["z-index"]=e.zIndex.getMax(i.floor,2)),i.initMask(s["z-index"]-1)),i.el.css(s),e.util.ie6&&(i.ie6Mask=t('<iframe border="0" frameborder="0" cellspacing="0" class="ie6mask" src="about:blank"></iframe>'),i.el.append(i.ie6Mask),setTimeout(function(){i.status&&i.ie6Mask.css({height:i.el.innerHeight(),width:i.el.innerWidth()})},100)),i.doContainer(),i.addListener("contentchanged",function(){"auto"!==i.height||i.status.hidden||setTimeout(function(){i.status&&i.locate("contentchanged"),e.util.ie6&&i.status&&i.ie6Mask.css({height:i.el.innerHeight(),width:i.el.innerWidth()})},0)}),i.addListener("afterresize",function(){i.locate("center")}),i.status.loaded=!0},doInitStatus:function(){this.status.hidden=!0,this.autoShow&&this.show()},initMask:function(i){var s=this,n={"z-index":i,width:t(window).width(),height:t(window).height()};if(s.mask=t('<div class="'+s.cmpCls+'_mask"></div>'),e.util.ie6&&(n.top=t(document).scrollTop(),n.left=t(document).scrollLeft(),this.mask.append('<iframe border="0" frameborder="0" cellspacing="0" class="" src="about:blank"></iframe>'),t(window).scroll(function(){t("."+s.cmpCls+"_mask").css({top:t(document).scrollTop(),left:t(document).scrollLeft()})})),s.mask.css(n),!e.maskResizeEvent){e.maskResizeEvent=!0;var o;t(window).resize(function(){clearTimeout(o),o=setTimeout(function(){t("."+s.cmpCls+"_mask").css({width:t(window).width(),height:t(window).height()})},100)})}t.isNumeric(this.modal)&&this.mask.css({opacity:this.modal,filter:"alpha(opacity="+100*this.modal+")"}),this.status.rendered&&this.mask.appendTo("body")},doDraggable:function(){},doResizable:function(){},initHead:function(){if(this.title||this.tbar&&this.tbar.length||this.icon){if(this.icon){var i=t('<span class="'+this.cmpCls+'_head_icon"></span>');i.addClass(this.icon),this.headEl.append(i)}this.titleEl=t('<span class="'+this.cmpCls+'_head_title"></span>'),this.titleEl.append(t("<span></span>").html(this.title));var s=t('<span class="'+this.cmpCls+'_head_tools"></span>');e.Tools.renderTools.call(this,this.tbar,s),this.headEl.show().append(this.titleEl).append(s)}else this.headEl.hide()},initButtons:function(){var i=this;i.bbar=i.buttons||i.bbar,i.buttons=[],i.bbar instanceof Array&&i.bbar.length&&(i.footEl=t('<div class="'+i.cmpCls+'_foot"></div>'),i.footEl.appendTo(i.el.find("."+i.cmpCls+"_bc")),t.each(i.bbar,function(t,s){var n=new e.Button({renderTo:i.footEl,btnCls:s.cls,cls:i.cmpCls+"_btn",type:s.type||i.defaultBtnType,scope:i.proxy||i,size:s.size,text:s.text,handler:s.handler,disabled:s.disabled});i.buttons.push(n)}))},buildDom:function(){var e=t("<div></div>").addClass(this.cmpCls+"_tl"),i=t("<div></div>").addClass(this.cmpCls+"_tr"),s=t("<div></div>").addClass(this.cmpCls+"_tc");e.append(i.append(s));var n=t("<div></div>").addClass(this.cmpCls+"_ml"),o=t("<div></div>").addClass(this.cmpCls+"_mr"),a=t("<div></div>").addClass(this.cmpCls+"_mc");n.append(o.append(a));var r=t("<div></div>").addClass(this.cmpCls+"_bl"),h=t("<div></div>").addClass(this.cmpCls+"_br"),l=t("<div></div>").addClass(this.cmpCls+"_bc");r.append(h.append(l)),this.headEl=t('<div class="'+this.cmpCls+'_head"></div>'),this.headEl.appendTo(s),this.bodyEl=t('<div class="'+this.cmpCls+'_body"></div>').appendTo(a),this.el.append(e).append(n).append(r)},getHeight:function(){return this.el.height()||1*this.height||0+this.frameHeight},getWidth:function(){return this.el.width()||1*this.width||0+this.frameWidth},setContentHeight:function(t){this.contentHeight=t,this.bodyEl.height(t)},show:function(){var i=this;if(i.status.rendered||(i.render("body"),i.mask&&i.mask.appendTo("body")),!i.status.hidden)return!1;i.modal!==!1&&(e.util.ie6&&i.mask.height(t(window).height()),i.mask.show()),i.el.css({display:"block",visibility:"hidden"}),i.locate("center"),i.el.css({display:"none",visibility:"visible"});var s=e.Component.prototype.show.apply(this,arguments);return e._isDeferred(s)&&s.done(function(){i.container&&i.container.load()}),s},close:function(){"destroy"===this.closeAction?this.destroy():this.hide()},hide:function(){var t=e.Component.prototype.hide.apply(this,arguments);return this.modal!==!1&&this.mask.hide(),t},destroy:function(){this.modal!==!1&&this.mask.remove(),t.each(this.buttons||[],function(t,e){e&&e.destroy&&e.destroy()}),e.Component.prototype.destroy.apply(this,arguments)},getTitle:function(){return this.title},setTitle:function(t){this.title=t||"",this.titleEl.html(this.title)}};e.createComponent({xtype:"Window",opts:s,methods:n,extend:e.Component,api:["content","status","setTitle","getTitle","destroy","show","hide","trigger","addListener","removeListener","close","setContentHeight","setHeight","setWidth","getWidth","getHeight"]}),e.baseMessageBox=function(i,s,n){var o={success:"weiboyiMessage_success",error:"weiboyiMessage_error",info:"weiboyiMessage_info",loading:"weiboyiMessage_loading",question:"weiboyiMessage_question"}[s||"info"],a=t('<div class="weiboyiMessage_ctnr"></div>'),r=t('<span class="weiboyiMessage_content '+o+'"></span>').html(i);return r.css({display:"inline-block"}),new e.Window(t.extend({content:a.append(r),autoShow:!0,width:400,height:"auto",floor:"high",closeAction:"destroy",modal:0},n))},e.confirm=function(t,i,s){"function"==typeof i&&(s=i,i="question");var n=e.getCmp("weiboyiConfirmWin");n&&n.destroy(),e.baseMessageBox(t,i,{title:"提示",id:"weiboyiConfirmWin",tbar:[{id:"close",handler:function(){"function"==typeof s&&s.call(this,!1),this.close()}}],bbar:[{text:"确定",handler:function(){"function"==typeof s&&s.call(this,!0),this.close()}},{text:"取消",cls:"btn_small_normal",handler:function(){"function"==typeof s&&s.call(this,!1),this.close()}}]})},e.alert=function(t,i,s){"function"==typeof i&&(s=i,i="info");var n=e.getCmp("weiboyiAlertWin");n&&n.destroy(),e.baseMessageBox(t,i,{title:"提示",id:"weiboyiAlertWin",tbar:[{id:"close",handler:function(){"function"==typeof s&&s.call(this,!1),this.close()}}],bbar:[{text:"确定",handler:function(){"function"==typeof s&&s.call(this,!0),this.close()}}]})},e.message=function(t,i,s){"number"==typeof i&&(s=i,i="info");var n=e.getCmp("weiboyiMessageWin");return n&&n.destroy(),n=e.baseMessageBox(t,i,{id:"weiboyiMessageWin",tbar:[]}),"number"!=typeof s&&(s=2),0!==s&&setTimeout(function(){n.status&&n.close()},1e3*s),{close:function(){n.close&&n.close()}}}}(jQuery,Weiboyi),function(t,e,i){var s={template:"default",cmpCls:"weiboyiTips",style:{},tbar:[],width:300,height:"auto",offset:{x:5,y:5},anchorOffset:{x:0,y:0},lazyLoad:!0,title:i,icon:i,target:i,autoShow:!1,trackMouse:!1,floor:"middle",modal:!1,group:i,type:"click",anchor:"bottom",autoHide:1,defaultBtnType:"important"},n={initComponent:function(){var i=this;i.offset.x=i.offset.x||0,i.offset.y=i.offset.y||0,i.target=t(i.target),i.autoShow?i.currentTarget=i.target:(i.respond(),"number"==typeof i.autoHide||i.trackMouse||i.tbar.push("close")),e.Window.prototype.initComponent.apply(i,arguments)},respond:function(){var e=this;this.autoHide===!0&&(this.autoHide=0),this.eventType="bind";try{this.target.length===t(this.target.selector).length&&(this.eventType="live")}catch(i){}finally{}this.target[this.eventType](this.type,function(){e.currentTarget=t(this),e.show(),e.trigger("ontargetchanged",[e,e.currentTarget]),clearTimeout(e.hideTimer)}),this.el.add(this.target).bind("mouseover",function(){clearTimeout(e.hideTimer)}).bind("mouseleave",function(){"number"==typeof e.autoHide&&(clearTimeout(e.hideTimer),e.hideTimer=setTimeout(function(){e.status&&e.hide()},1e3*e.autoHide))}),this.trackMouse&&(this.autoHide=0,this.target.mousemove(function(t){e.status.hidden||e.el.css({left:t.pageX+e.offset.x+"px",top:t.pageY+e.offset.y+"px"})}))},locate:function(e){if(e&&e.length){if("contentchanged"===e)return this.locate(this.currentTarget),i;var s,n,o,a=this.getHeight(),r=this.getWidth(),h=this.anchor,l=e.offset(),d=t(e).width(),c=t(e).height(),u={},f=window.scrollY||document.body.scrollTop,p=window.scrollX||document.body.scrollLeft,m=document.documentElement;switch(m?(s=window.innerWidth||m.clientWidth,n=window.innerHeight||m.clientHeight,f=window.scrollY||m.scrollTop,p=window.scrollX||m.scrollLeft):(s=document.body.offsetWidth,n=document.body.offsetHeight,f=document.body.scrollTop,p=document.body.scrollLeft),s-=25,n-=25,o={top:l.top-f,left:l.left-p,right:s-l.left-d+p,bottom:n-l.top-c+f},"auto"===h&&(h="bottom"),/^(top|bottom)$/.test(h)&&o.bottom<=a+this.offset.y&&(h=o.top<=a+this.offset.y?"left":"top"),o.left<=r+this.offset.x&&"left"===h&&(h="right"),o.right<=r+this.offset.x&&"right"===h&&(h="left"),h){case"left":u.top=l.top+(c-a)/2,u.left=l.left-r-this.offset.x;
break;case"right":u.top=l.top+(c-a)/2,u.left=l.left+d+this.offset.x;break;case"top":u.left=l.left-r/2+d/2+this.offset.x,u.top=l.top-a-this.offset.y;break;default:u.left=l.left-r/2+d/2+this.offset.x,u.top=l.top+c+this.offset.y}this.currentAnchor=h,this.anchorLeft=r/2-7-this.offset.x+this.anchorOffset.x,this.anchorTop=a/2-7-this.offset.y+this.anchorOffset.y;var g;p>u.left?(g=u.left,u.left=p+5,this.anchorLeft+=g-u.left):u.left+r>p+s&&(g=u.left,u.left=p+s-5-r,this.anchorLeft+=g-u.left),f>u.top,this.locateAnchor(h,r,a),this.el.css(u)}},getTarget:function(){return this.target},getCurrentTarget:function(){return this.currentTarget},locateAnchor:function(i,s,n){var o=this,a={top:{selector:"."+this.cmpCls+"_bc",css:{top:e.util.ie6?n:"auto",bottom:e.util.ie6?"auto":-8,left:o.anchorLeft},cls:o.cmpCls+"_anchor"},bottom:{selector:"."+this.cmpCls+"_tc",css:{top:-8,bottom:"auto",left:o.anchorLeft},cls:o.cmpCls+"_anchor"},left:{selector:"."+this.cmpCls+"_mr",css:{right:-8,left:"auto",top:o.anchorTop},cls:o.cmpCls+"_anchor anchor_left"},right:{selector:"."+this.cmpCls+"_ml",css:{left:-8,right:"auto",top:o.anchorTop},cls:o.cmpCls+"_anchor anchor_right"}}[i];this.anchorEl=this.anchorEl||t("<span></span>"),this.anchorEl.removeClass().addClass(a.cls),this.el.find(a.selector).addClass("tipsAnchorWrap").append(this.anchorEl.css(a.css))},show:function(i){var s=this;return s.status.rendered||s.render("body"),i&&(i=t(i),i.length&&(s.currentTarget=i)),s.container&&s.container.load(),s.trackMouse||s.locate(s.currentTarget),s.group&&t.each(e.getCmps({group:this.group}),function(t,e){e.hide()}),e.Component.prototype.show.apply(s,arguments)},destroy:function(){"bind"===this.eventType?this.target.unbind(this.type):this.target.die(this.type),clearTimeout(this.hideTimer),e.Window.prototype.destroy.apply(this,arguments)}};e.createComponent({xtype:"Tips",opts:s,methods:n,extend:e.Window,api:["getTarget","getCurrentTarget"]})}(jQuery,Weiboyi);